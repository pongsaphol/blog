---
title: 'วิจารณ์ระบบ TOI ฉบับคนที่ไม่ได้แข่ง'
excerpt: 'Thailand Olympiad in Informatics คือการแข่งขันคอมพิวเตอร์โอลิมปิกระดับชาติเพื่อคัดนักเรียนประมาณ 25 คนเข้าค่าย สสวท. เพื่อเป็นตัวแทนประเทศต่อไป'
coverImage: '/assets/blog/toi16/poster.jpg'
date: '2020-12-04T03:30:27.322Z'
author:
  name: Pongsaphol
  picture: '/assets/blog/authors/win11905.jpeg'
ogImage:
  url: '/assets/blog/toi16/poster.jpg'
---

สวัสดีครับ ห่างหายจากการบ่นไปสักระยะนึง วันนี้ขอมาพูดเรื่องภาพรวมของการจัด TOI (Thailand Olympiad in Informatics) ของปีนี้นะครับ ประเด็นหลักจะพูดในเชิง **ลบ** 

ก่อนอื่นผมค่อนข้างคาดหวังกับการแข่งขันนี้อยู่ไม่น้อยเพราะผมได้พูดปัญหาของรอบก่อน ๆ ให้คณะกรรมการวิชาการฟังแล้วและดูเหมือนพวกเขาจะรับฟังอย่างดิบดี แต่มิหาไม่ ผลการแข่งขันที่ออกมาบ่งบอกได้ว่าคูณภาพได้ลดลงอย่างได้ชัด แม้ว่าทางผมจะพยายามออกมาเคลื่อนไหวอะไรบางอย่าง ตัวอย่างเช่นการจัดการแข่งขัน THACO (Thailand Computing Olympiad) เพื่อที่จะเสนอว่าการแข่งขันที่ดีควรออกมาในรูปแบบใด การที่ผลออกมาแบบนี้ทั้ง ๆ ที่มีคนช่วยทำมากกว่าทีมที่ผมทำ ผมถือว่าผมไม่สามารถยอมรับผลนี้ได้ 

การที่คุณ (สอวน.) มีจุดประสงค์เพื่อยกระดับอะไรก็ว่ากันไปผมค่อนข้างสนับสนุนด้วย ปากบอกว่ายกระดับแต่คุณภาพโจทย์ยิ่งมายิ่งห่วยลง ไม่เพียงเท่านั้นโจทย์ยังมีปัญหาเรื่องความถูกต้องอีกและทางผมพึ่งมาเจอหลังจากงานจบแล้ว ผมค่อนข้างมั่นใจว่าคนที่ได้รับผลกระทบจากความผิดพลาดของคุณคงมีไม่น้อย 

อย่างไรก็ตามผมต้องการให้คุณแสดงความรับผิดชอบโดยการชี้แจงข้อผิดพลาดทั้งหมดบนสื่อสาธารณะ ตัวอย่างเช่น Facebook ในเพจ [การแข่งขันคอมพิวเตอร์โอลิมปิกระดับชาติ ครั้งที่ 16](https://web.facebook.com/toi2020.kku) เพื่อความโปร่งใสและชัดเจนว่าปัญหาที่เจอตอนนี้มีอะไรบ้างและได้รับการตรวจสอบไปถึงขั้นไหนโดยที่ทางผมจะช่วยหาว่าปัญหาและจะพิมพ์ลง blog นี้ จุดยืนผมตอนนี้คือ**บ่นเอามัน** และไม่สนว่าผู้เข้าแข่งขันจะได้คะแนนยังไง ถึงอย่างนั้นยังมีคนบางกลุ่มสนับสนุนให้จัดการแข่งขึ้นใหม่อีกรอบซึ่งผม**ไม่มีส่วนเกี่ยวข้อง**กับแนวคิดนี้อย่างประการใด

## Outline ปัญหาที่เจอตอนนี้
- dinocell ค่า K ไม่ตรงเงื่อนไข ([ref](https://beta.programming.in.th/submissions/E4jbMMjNmQc1P4RySGYu))
- dinocell official solution ผิด testcase #6 
- watertruck pdf sample #1 input ผิดเงื่อนไข
- outbreak sample #3 output น่าจะผิด ควรตอบ 0\n3
- outbreak เทส 5, 9, 10 ผิดจริง
- carte official solution อาจจะ run ไม่ทัน (เชคใน server programming.in.th โดยการ complie ผ่าน -O2 ใช้เวลา 1.4 s แต่รอเชคในเครื่องแข่งว่าเวลาโอเคหรือเปล่า)
- สงสัยข้อ dinowheel ว่ามันสามารถ solve ได้ทันจริงหรือ (รอ official solution)

## [Carte](https://beta.programming.in.th/tasks/toi16_carte)
  ขอนี้เป็นโจทย์สุดแสน classic แต่ที่มีปัญหาคือมีคน reverse engineer แล้วได้ 60 คะแนน
  การที่ผลมันออกเป็นแบบนี้บ่งบอกได้ว่ากรรมการวิชาการนั้นเจนเทสเคสได้ไม่ดีและการที่ปรับคะแนนหลังการแข่งขันสำหรับคนที่ reverse engineer เป็น 0 ถือว่ายอมรับไม่ได้ โดยที่ก่อนจะปรับคะแนน คณะกรรมการได้เสนอทางเลือกให้ 3 ทางเลือก
  - (A) คงเดิม
  - (B) เปลี่ยนคะแนนคนที่ทําให้เป็น 0
  - (C) ทดลองรัน test data ใหม่
  
  ### ทางเลือก B
  ![img](/assets/blog/toi16/carte_b.png) 
  ทางเลือกนี้ค่อนข้างชัดเจน คือมานั่งไล่ดู code แต่ละคนว่าทำ reverse engineer หรือเปล่าโดยที่บทสรุปของข้อนี้คือมีคนคะแนนลดทั้งหมด 9 คนรวม -260 คะแนน

  ### ทางเลือก C
  ![img](/assets/blog/toi16/carte_c.png) 
  เทสเคส TOI นั้นไม่ได้ตรวจเป็นกลุ่มเลยทำให้การทำแบบนี้มีผลต่อผู้เข้าแข่งขันเยอะโดยจะมีผู้เข้าแข่งขันคะแนนลด 18 คนและคะแนนเพิ่ม 22 คนรวม -140 คะแนน


  อย่างที่ได้กล่าวไป คณะกรรมการได้เลือกทางเลือก B ทำให้คนที่ทำ reverse engineer นั้นได้ 0 คะแนนและเหตุผลที่ผมตอมรับไม่ได้คือคุณทำเทสเคสห่วยตั้งแต่แรกและไม่ได้เป็นความผิดของผู้เข้าแข่งขันที่จะพยายามทำให้ได้คะแนนมากที่สุด การที่ผู้เข้าแข่งขันนั้นทำอะไรบางอย่างและได้คะแนนจารการทำสิ่งนั้นแล้ว คณะกรรมการจะมาเปลี่ยนแปลงผลคะแนน**ไม่ได้**เพราะถือว่านี่เป็นความผิดพลาดของคณะกรรมการเอง

  ที่จริง การแข่งที่มีมาตรฐานควรมีการตรวจเป็นกลุ่ม กล่าวคือ การที่จะได้คะแนนจากคะแนนย่อย โปรแกรมของคุณทำเป็นต้องผ่านทั้งหมดในกลุ่มนั้น การที่คุณมานั้งไล่ดูโปรแกรมของผู้เข้าแข่งขันแล้วบอกว่าเป็นการ reverse engineer หรือไม่ดูไม่ค่อยยุติธรรม เพราะสำหรับโจทย์ข้ออื่นนั้นที่แต่ละคนได้คะแนนไม่เต็มกลุ่มของปัญหาย่อยสื่อถึงว่าผู้เข้าแข่งขันคนนั้นได้ทำอะไรบางอย่างที่ไม่ถูกต้องอยู่แล้วจึงได้คะแนนไม่เต็มกลุ่ม
  อีกอย่าง ในโจทย์ข้อนี้มีเทสแคสเพียงแค่ 10 เทสเคสนั้นสื่อถึงว่าผู้จัดแข่งขันนั้นไม่สามารถเตรียมเทสเคสได้ทันเวลา และไม่สามารถเจนเทสเคสอย่างรอบคอบได้ ผลถึงออกมาแบบนี้ ถ้าเป็นการแข่งขันของต่างประเทศสมัยนี้ ใน 1 ข้อจะมีเป็นถึงขั้นระดับ 100 เทสเคสแล้ว แต่นี่ยังย่ำอยู่กับที่ ทั้ง ๆ ที่มีทีมงานมากกว่าการแข่งขันที่ผมจัด ผมถือว่ายอมรับไม่ได้

  ในส่วน Official Solution นั้น ผมได้สังเกตว่ามีการทำการ coordinate compression กล่าวคือ การที่เอาเลขซ้ำกันมามัดเป็น group เดียวกันทำให้ Official Solution รันเร็วกว่าที่ควรเป็น อย่างไรก็ดียังมีบางเทสเคสที่สามารถดักเรื่องนี้ได้อยู่คือ เทสที่ไม่มีเลขเดียวกันติดกันเลยซึ่งทางผมได้ลองเจนแล้วไปรันใน server ผลปรากฎออกมาว่าใช้เวลาทั้งหมด 1465ms ซึ่งเกิน 1 วินาที คงต้องคอยลุ้นกันว่าเครื่องตัวตรวจจะรันกี่ ms แล้วถ้ามันเกิน 1 วินาทีจริง ๆ จะแก้ปัญหายังไง

## [Dino Cell](https://beta.programming.in.th/tasks/toi16_dinocell)
  สำหรับข้อนี้พึ่งตรวจพบว่า testcase #6 นั้นผิดจริงแต่ทางคณะกรรมการได้ชี้แจงว่าได้ทำการแก้ระหว่างสอบแล้วแต่เพื่อความแน่ใจ ผมคงต้องขอตรวจสอบอย่างละเอียดว่าเทสเคสที่ใช้ระหว่างแข่งนั้นถูกต้องจริงหรือไม่เพื่อความยุติธรรมของทุกฝ่ายโดยเฉพาะผู้เข้าแข่งขันอย่างไรก็ตามเงื่อนไขค่า K นั้นยังผิดจริง มีความเป็นไปได้สูงมากว่าระหว่างแข่ง pdf ได้แสดงขอบเขตของ K ที่ผิดไปซึ่งจะมีผลกระทบต่อคนบางกลุ่มที่ไม่ได้เผื่อค่า K ไว้ในกรณีที่มากว่าโจทย์ระบุไว้ 

  การที่มีเทสเคสที่ผิดเป็นสิ่งที่ผมไม่สามารถยอมรับได้ยิ่งกว่าเทสกากที่ reverse engineer แล้วได้ 60 คะแนนผมค่อนข้างมั่นใจว่าจะมีผู้เข้าแข่งขันบางส่วนนั้นเสียผลประโยชน์อย่างแน่นอน ต้องคอยติดตามว่าทาง **คณะกรรมการ** จะแก้ไขปัญหายังไง ในขณะนี้ได้ข่าวว่าจะทำการแก้ไขเทสเคสให้ถูกต้องแล้วนำไปตรวจใหม่โดยจะตรวจ **submission สุดท้ายเท่านั้น** ซึ่งดูจะไม่ค่อยยุติธรรมสำหรับทุกคนเลยเนื่องจากอาจจะมีผู้เข้าแข่งขันบางคนที่ code ตนเองอาจจะถูกตั้งแต่แรกแต่ไม่ได้คะแนน เลยจำยอมโดยการส่ง code อีก version เพื่อให้ได้คะแนนมากกว่าโดยที่ code อันเก่าอาจจะถูกต้องตั้งแต่แรกแล้ว ในขณะนี้ fossil grader ไม่มีระบบตรวจย้อนหลังแบบทุกเทสเคสแล้วเอาคะแนนมาทำ max ซึ่งถ้ามันออกมาในรูปแบบนี้ คณะกรรมการจำเป็นต้องทำมือเพื่อให้ได้คำตอบทุกเทสเคสแล้วจึงรวบรวมคะแนนเป็นก้อนเดียวกัน


ส่วนข้ออื่นบางข้อยังไม่มีใครสามารถทำให้ได้คะแนนเต็ม ส่วนนี้อาจจะมีแนวโน้มว่าเทสเคสบั๊ก ถ้ามีอะไรแย่ ๆ เกิดขึ้นและบางข้อยังไม่ได้เขียน (เพราะขี้เกียจเขียนต่อ) จะมาอัปเดทในนี้ต่อไป

รอบนี้ขอพูดถึงปัญหาเชิงจัดการก่อน รอบต่อไปจะพูดเรื่องคุณภาพโจทย์ที่อยู่ในระดับ **แย่** อย่างละเอียดโดยจะพิจารณาเป็นรายข้อ

## ทางออก
  แม้ว่าผมจะวิจารณ์ในเชิงบ่น แต่ผมก็เสนอวิธีแก้ปัญหา ก่อนอื่นต้องยอมรับว่าระบบ Grader ที่ใช้อยู่ในการแข่งขันนั้น **ห่วยมาก** (ขณะนี้การแข่งขันใช้ fossil grader ซึ่งเป็น php มีแต่ code และไม่มีคู่มือ) ทางออกคือ ควรย้ายระบบไปเป็น CMS Grader ที่ IOI เขาใช้กัน โดยที่ Grader นี้สามารถตรวจแบบ parallel ได้และ efficient กว่าแน่นอนโดยที่คุณสามารถใช้ server หลายเครื่องแล้วกระจายงานไปแต่ละเครื่องได้ ต่อไปในเรื่องของ Time Management ในการออกโจทย์ ผมได้ข่าวมาว่าประชุมพิจารณาโจทย์นั้นได้ดพเนินมก่อนแข่งมานานมากแล้ว แต่การเจนเทสเคสดันทำก่อนแข่งเพียง 1 วันคุณภาพมันเลยเละเทะอย่างนี้ ผมเสนอให้ไปเจนเทสเคสบน [Polygon](https://polygon.codeforces.com/) ซึ่งมีเครื่องมือครบทุกอย่างในการออกโจทย์ 



